{
    "openapi": "3.0.0",
    "info": {
        "title": "Risk Management System API",
        "version": "1.0.0",
        "description": "A comprehensive Risk Management Backend System for portfolio risk assessment, scoring, and analysis capabilities for individual investors. Designed for integration with MuleSoft.\n\n## Overview\nThis API provides:\n- **Risk Tolerance Assessment** - 15-question questionnaire processing and scoring\n- **Portfolio Risk Analysis** - VaR, Sharpe Ratio, Beta, Standard Deviation calculations\n- **Concentration Risk Detection** - Single position, sector, and top-5 holdings analysis\n- **Stress Testing** - Scenario analysis with historical and hypothetical scenarios\n- **Investment Suitability** - Portfolio vs risk profile alignment checks\n- **Recommendations** - Generated investment recommendations\n\n## Authentication\nThis is a demo API with **no authentication required**.\n\n## Base URLs\n- **Production:** https://risk-management-system-f04b786dc797.herokuapp.com/api/v1\n- **Local:** http://localhost:3002/api/v1\n\n## Data Note\nThis system uses an **in-memory datastore** that resets when the server restarts. It comes pre-loaded with 50 sample investors.",
        "contact": {
            "name": "API Support",
            "email": "support@riskmanagement.demo"
        },
        "license": {
            "name": "ISC",
            "url": "https://opensource.org/licenses/ISC"
        }
    },
    "servers": [
        {
            "url": "https://risk-management-system-f04b786dc797.herokuapp.com/api/v1",
            "description": "Production server (Heroku)"
        },
        {
            "url": "http://localhost:3002/api/v1",
            "description": "Local development server"
        },
        {
            "url": "/api/v1",
            "description": "Relative URL (same origin)"
        }
    ],
    "tags": [
        {
            "name": "Health",
            "description": "Health check endpoints"
        },
        {
            "name": "Reference Data",
            "description": "Questionnaires, risk categories, factors, and benchmarks"
        },
        {
            "name": "Investors",
            "description": "Investor management operations"
        },
        {
            "name": "Assessments",
            "description": "Risk assessment questionnaires"
        },
        {
            "name": "Profiles",
            "description": "Risk profile management"
        },
        {
            "name": "Analysis",
            "description": "Core risk analysis and calculations"
        },
        {
            "name": "Scenarios",
            "description": "Stress test scenario management"
        },
        {
            "name": "Scores",
            "description": "Risk score tracking"
        },
        {
            "name": "Recommendations",
            "description": "Investment recommendations"
        }
    ],
    "components": {
        "schemas": {
            "Investor": {
                "type": "object",
                "properties": {
                    "investorId": {
                        "type": "string",
                        "example": "INV-001"
                    },
                    "customerId": {
                        "type": "string",
                        "example": "CUST-001"
                    },
                    "firstName": {
                        "type": "string",
                        "example": "John"
                    },
                    "lastName": {
                        "type": "string",
                        "example": "Smith"
                    },
                    "email": {
                        "type": "string",
                        "example": "john.smith@email.com"
                    },
                    "phone": {
                        "type": "string",
                        "example": "555-0101"
                    },
                    "dateOfBirth": {
                        "type": "string",
                        "format": "date",
                        "example": "1975-03-15"
                    },
                    "age": {
                        "type": "integer",
                        "example": 49
                    },
                    "employmentStatus": {
                        "type": "string",
                        "enum": [
                            "EMPLOYED",
                            "SELF_EMPLOYED",
                            "RETIRED",
                            "UNEMPLOYED"
                        ],
                        "example": "EMPLOYED"
                    },
                    "annualIncome": {
                        "type": "number",
                        "example": 150000
                    },
                    "netWorth": {
                        "type": "number",
                        "example": 850000
                    },
                    "liquidNetWorth": {
                        "type": "number",
                        "example": 450000
                    },
                    "investmentExperience": {
                        "type": "string",
                        "enum": [
                            "NOVICE",
                            "INTERMEDIATE",
                            "EXPERIENCED",
                            "EXPERT"
                        ],
                        "example": "EXPERIENCED"
                    },
                    "investmentHorizon": {
                        "type": "string",
                        "enum": [
                            "SHORT_TERM",
                            "MEDIUM_TERM",
                            "LONG_TERM"
                        ],
                        "example": "LONG_TERM"
                    }
                }
            },
            "RiskProfile": {
                "type": "object",
                "properties": {
                    "profileId": {
                        "type": "string",
                        "example": "PRF-001"
                    },
                    "investorId": {
                        "type": "string",
                        "example": "INV-001"
                    },
                    "riskCategory": {
                        "type": "string",
                        "enum": [
                            "CONSERVATIVE",
                            "MODERATELY_CONSERVATIVE",
                            "MODERATE",
                            "MODERATELY_AGGRESSIVE",
                            "AGGRESSIVE"
                        ],
                        "example": "MODERATE"
                    },
                    "riskCategoryCode": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 5,
                        "example": 3
                    },
                    "compositeRiskScore": {
                        "type": "number",
                        "example": 65
                    },
                    "riskToleranceScore": {
                        "type": "number",
                        "example": 65
                    },
                    "riskCapacityScore": {
                        "type": "number",
                        "example": 72
                    },
                    "recommendedAllocation": {
                        "type": "object",
                        "properties": {
                            "equities": {
                                "type": "number",
                                "example": 60
                            },
                            "fixedIncome": {
                                "type": "number",
                                "example": 30
                            },
                            "alternatives": {
                                "type": "number",
                                "example": 5
                            },
                            "cash": {
                                "type": "number",
                                "example": 5
                            }
                        }
                    },
                    "maxDrawdownTolerance": {
                        "type": "number",
                        "example": 25
                    },
                    "maxVolatilityTolerance": {
                        "type": "number",
                        "example": 18
                    },
                    "maxConcentrationLimit": {
                        "type": "number",
                        "example": 25
                    }
                }
            },
            "PortfolioRiskRequest": {
                "type": "object",
                "required": [
                    "portfolioData"
                ],
                "properties": {
                    "investorId": {
                        "type": "string",
                        "example": "INV-001"
                    },
                    "portfolioData": {
                        "type": "object",
                        "required": [
                            "totalValue",
                            "holdings"
                        ],
                        "properties": {
                            "totalValue": {
                                "type": "number",
                                "example": 485000
                            },
                            "holdings": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "symbol": {
                                            "type": "string",
                                            "example": "AAPL"
                                        },
                                        "securityType": {
                                            "type": "string",
                                            "example": "STOCK"
                                        },
                                        "sector": {
                                            "type": "string",
                                            "example": "TECHNOLOGY"
                                        },
                                        "marketValue": {
                                            "type": "number",
                                            "example": 35700
                                        },
                                        "weight": {
                                            "type": "number",
                                            "example": 7.36
                                        },
                                        "beta": {
                                            "type": "number",
                                            "example": 1.25
                                        },
                                        "annualizedVolatility": {
                                            "type": "number",
                                            "example": 28.5
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "benchmarkSymbol": {
                        "type": "string",
                        "example": "SPY"
                    }
                }
            },
            "SuccessResponse": {
                "type": "object",
                "properties": {
                    "success": {
                        "type": "boolean",
                        "example": true
                    },
                    "data": {
                        "type": "object"
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "ErrorResponse": {
                "type": "object",
                "properties": {
                    "success": {
                        "type": "boolean",
                        "example": false
                    },
                    "error": {
                        "type": "object",
                        "properties": {
                            "code": {
                                "type": "string",
                                "example": "NOT_FOUND"
                            },
                            "message": {
                                "type": "string",
                                "example": "Resource not found"
                            }
                        }
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            }
        }
    },
    "paths": {
        "/analysis/portfolio-risk": {
            "post": {
                "summary": "Calculate portfolio risk metrics",
                "description": "Analyzes portfolio and calculates comprehensive risk metrics including VaR, Sharpe ratio, beta, and more",
                "tags": [
                    "Analysis"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PortfolioRiskRequest"
                            },
                            "example": {
                                "investorId": "INV-001",
                                "portfolioData": {
                                    "totalValue": 485000,
                                    "holdings": [
                                        {
                                            "symbol": "AAPL",
                                            "securityType": "STOCK",
                                            "sector": "TECHNOLOGY",
                                            "marketValue": 35700,
                                            "weight": 7.36,
                                            "beta": 1.25
                                        },
                                        {
                                            "symbol": "MSFT",
                                            "securityType": "STOCK",
                                            "sector": "TECHNOLOGY",
                                            "marketValue": 63000,
                                            "weight": 13,
                                            "beta": 1.15
                                        }
                                    ],
                                    "cashPosition": 15000
                                },
                                "benchmarkSymbol": "SPY"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Portfolio risk analysis complete",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "investorId": {
                                                    "type": "string"
                                                },
                                                "analysisDate": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "portfolioMetrics": {
                                                    "type": "object",
                                                    "properties": {
                                                        "totalValue": {
                                                            "type": "number",
                                                            "example": 485000
                                                        },
                                                        "portfolioVolatility": {
                                                            "type": "number",
                                                            "description": "Annual standard deviation %",
                                                            "example": 14.5
                                                        },
                                                        "portfolioBeta": {
                                                            "type": "number",
                                                            "example": 1.12
                                                        },
                                                        "sharpeRatio": {
                                                            "type": "number",
                                                            "example": 1.25
                                                        },
                                                        "sortinoRatio": {
                                                            "type": "number",
                                                            "example": 1.45
                                                        },
                                                        "treynorRatio": {
                                                            "type": "number",
                                                            "example": 0.08
                                                        },
                                                        "informationRatio": {
                                                            "type": "number",
                                                            "example": 0.42
                                                        },
                                                        "maxDrawdown": {
                                                            "type": "number",
                                                            "example": -18.5
                                                        },
                                                        "valueAtRisk": {
                                                            "type": "object",
                                                            "properties": {
                                                                "var95_percent": {
                                                                    "type": "number"
                                                                },
                                                                "var95_dollar": {
                                                                    "type": "number"
                                                                },
                                                                "var99_percent": {
                                                                    "type": "number"
                                                                },
                                                                "var99_dollar": {
                                                                    "type": "number"
                                                                }
                                                            }
                                                        },
                                                        "trackingError": {
                                                            "type": "number",
                                                            "example": 3.2
                                                        },
                                                        "rSquared": {
                                                            "type": "number",
                                                            "example": 0.89
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input - portfolioData with holdings is required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/analysis/concentration": {
            "post": {
                "summary": "Analyze concentration risk",
                "description": "Analyzes portfolio concentration including single position, sector, and top-5 holdings risk",
                "tags": [
                    "Analysis"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "holdings"
                                ],
                                "properties": {
                                    "investorId": {
                                        "type": "string",
                                        "example": "INV-001"
                                    },
                                    "holdings": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "symbol": {
                                                    "type": "string"
                                                },
                                                "sector": {
                                                    "type": "string"
                                                },
                                                "weight": {
                                                    "type": "number"
                                                }
                                            }
                                        },
                                        "example": [
                                            {
                                                "symbol": "AAPL",
                                                "sector": "TECHNOLOGY",
                                                "weight": 22.5
                                            },
                                            {
                                                "symbol": "MSFT",
                                                "sector": "TECHNOLOGY",
                                                "weight": 18.2
                                            }
                                        ]
                                    },
                                    "thresholds": {
                                        "type": "object",
                                        "properties": {
                                            "singlePositionLimit": {
                                                "type": "number",
                                                "default": 10
                                            },
                                            "sectorLimit": {
                                                "type": "number",
                                                "default": 25
                                            },
                                            "top5Limit": {
                                                "type": "number",
                                                "default": 50
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Concentration analysis complete",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "concentrationAnalysis": {
                                                    "type": "object",
                                                    "properties": {
                                                        "singlePosition": {
                                                            "type": "object",
                                                            "properties": {
                                                                "topHolding": {
                                                                    "type": "string"
                                                                },
                                                                "topHoldingWeight": {
                                                                    "type": "number"
                                                                },
                                                                "limit": {
                                                                    "type": "number"
                                                                },
                                                                "status": {
                                                                    "type": "string",
                                                                    "enum": [
                                                                        "OK",
                                                                        "BREACHED"
                                                                    ]
                                                                },
                                                                "breach": {
                                                                    "type": "number"
                                                                }
                                                            }
                                                        },
                                                        "sectorConcentration": {
                                                            "type": "object",
                                                            "properties": {
                                                                "topSector": {
                                                                    "type": "string"
                                                                },
                                                                "topSectorWeight": {
                                                                    "type": "number"
                                                                },
                                                                "status": {
                                                                    "type": "string"
                                                                },
                                                                "sectorBreakdown": {
                                                                    "type": "object"
                                                                }
                                                            }
                                                        },
                                                        "top5Concentration": {
                                                            "type": "object"
                                                        },
                                                        "herfindahlIndex": {
                                                            "type": "number",
                                                            "description": "Concentration measure 0-1"
                                                        },
                                                        "effectivePositions": {
                                                            "type": "number"
                                                        },
                                                        "overallConcentrationRisk": {
                                                            "type": "string",
                                                            "enum": [
                                                                "LOW",
                                                                "MODERATE",
                                                                "ELEVATED",
                                                                "HIGH"
                                                            ]
                                                        }
                                                    }
                                                },
                                                "alerts": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "alertType": {
                                                                "type": "string"
                                                            },
                                                            "severity": {
                                                                "type": "string"
                                                            },
                                                            "message": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Holdings array is required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/analysis/suitability": {
            "post": {
                "summary": "Check portfolio suitability vs profile",
                "description": "Compares portfolio characteristics against investor's risk profile to assess suitability",
                "tags": [
                    "Analysis"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "investorId",
                                    "portfolioData"
                                ],
                                "properties": {
                                    "investorId": {
                                        "type": "string",
                                        "example": "INV-001"
                                    },
                                    "portfolioData": {
                                        "type": "object",
                                        "properties": {
                                            "totalValue": {
                                                "type": "number"
                                            },
                                            "portfolioVolatility": {
                                                "type": "number"
                                            },
                                            "portfolioBeta": {
                                                "type": "number"
                                            },
                                            "maxDrawdown": {
                                                "type": "number"
                                            },
                                            "assetAllocation": {
                                                "type": "object",
                                                "properties": {
                                                    "equities": {
                                                        "type": "number"
                                                    },
                                                    "fixedIncome": {
                                                        "type": "number"
                                                    },
                                                    "alternatives": {
                                                        "type": "number"
                                                    },
                                                    "cash": {
                                                        "type": "number"
                                                    }
                                                }
                                            },
                                            "topHoldingWeight": {
                                                "type": "number"
                                            },
                                            "sectorConcentration": {
                                                "type": "object"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Suitability assessment complete",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "suitabilityAssessment": {
                                                    "type": "object",
                                                    "properties": {
                                                        "overallRating": {
                                                            "type": "string",
                                                            "enum": [
                                                                "HIGHLY_SUITABLE",
                                                                "SUITABLE",
                                                                "SUITABLE_WITH_CAVEATS",
                                                                "REVIEW_REQUIRED",
                                                                "NOT_SUITABLE"
                                                            ]
                                                        },
                                                        "overallScore": {
                                                            "type": "number"
                                                        },
                                                        "recommendation": {
                                                            "type": "string"
                                                        },
                                                        "dimensions": {
                                                            "type": "object",
                                                            "properties": {
                                                                "riskAlignment": {
                                                                    "type": "object"
                                                                },
                                                                "allocationAlignment": {
                                                                    "type": "object"
                                                                },
                                                                "concentrationCompliance": {
                                                                    "type": "object"
                                                                },
                                                                "timeHorizonFit": {
                                                                    "type": "object"
                                                                }
                                                            }
                                                        }
                                                    }
                                                },
                                                "riskProfile": {
                                                    "type": "object",
                                                    "properties": {
                                                        "profileId": {
                                                            "type": "string"
                                                        },
                                                        "riskCategory": {
                                                            "type": "string"
                                                        },
                                                        "maxVolatilityTolerance": {
                                                            "type": "number"
                                                        },
                                                        "maxDrawdownTolerance": {
                                                            "type": "number"
                                                        }
                                                    }
                                                },
                                                "actionRequired": {
                                                    "type": "boolean"
                                                },
                                                "requiredActions": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "investorId and portfolioData are required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/analysis/stress-test": {
            "post": {
                "summary": "Run stress test scenario",
                "description": "Applies stress test scenario(s) to a portfolio and calculates potential impact",
                "tags": [
                    "Analysis"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "investorId",
                                    "portfolioData"
                                ],
                                "properties": {
                                    "investorId": {
                                        "type": "string",
                                        "example": "INV-001"
                                    },
                                    "scenarioId": {
                                        "type": "string",
                                        "description": "Single scenario ID",
                                        "example": "SCN-001"
                                    },
                                    "scenarioIds": {
                                        "type": "array",
                                        "description": "Multiple scenario IDs (alternative to scenarioId)",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "SCN-001",
                                            "SCN-002",
                                            "SCN-005"
                                        ]
                                    },
                                    "portfolioData": {
                                        "type": "object",
                                        "required": [
                                            "totalValue",
                                            "holdings"
                                        ],
                                        "properties": {
                                            "totalValue": {
                                                "type": "number"
                                            },
                                            "holdings": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "symbol": {
                                                            "type": "string"
                                                        },
                                                        "sector": {
                                                            "type": "string"
                                                        },
                                                        "marketValue": {
                                                            "type": "number"
                                                        },
                                                        "weight": {
                                                            "type": "number"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Stress test complete",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scenarioResults": {
                                                    "type": "object",
                                                    "properties": {
                                                        "scenarioId": {
                                                            "type": "string"
                                                        },
                                                        "scenarioName": {
                                                            "type": "string"
                                                        },
                                                        "portfolioImpact": {
                                                            "type": "object",
                                                            "properties": {
                                                                "currentValue": {
                                                                    "type": "number"
                                                                },
                                                                "stressedValue": {
                                                                    "type": "number"
                                                                },
                                                                "dollarLoss": {
                                                                    "type": "number"
                                                                },
                                                                "percentageLoss": {
                                                                    "type": "number"
                                                                },
                                                                "recoveryTime": {
                                                                    "type": "string"
                                                                }
                                                            }
                                                        },
                                                        "holdingImpacts": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "object"
                                                            }
                                                        },
                                                        "worstHit": {
                                                            "type": "array"
                                                        },
                                                        "bestProtected": {
                                                            "type": "array"
                                                        }
                                                    }
                                                },
                                                "riskProfileComparison": {
                                                    "type": "object",
                                                    "properties": {
                                                        "maxDrawdownTolerance": {
                                                            "type": "number"
                                                        },
                                                        "scenarioDrawdown": {
                                                            "type": "number"
                                                        },
                                                        "exceedsToleranceBy": {
                                                            "type": "number"
                                                        },
                                                        "warning": {
                                                            "type": "string"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Missing required fields",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/analysis/comprehensive": {
            "post": {
                "summary": "Full risk analysis (all metrics)",
                "description": "Performs comprehensive risk analysis including portfolio risk, concentration, suitability, optional stress tests, and generates recommendations",
                "tags": [
                    "Analysis"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "investorId",
                                    "portfolioData"
                                ],
                                "properties": {
                                    "investorId": {
                                        "type": "string",
                                        "example": "INV-001"
                                    },
                                    "portfolioData": {
                                        "type": "object",
                                        "required": [
                                            "totalValue",
                                            "holdings"
                                        ],
                                        "properties": {
                                            "totalValue": {
                                                "type": "number"
                                            },
                                            "holdings": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object"
                                                }
                                            },
                                            "cashPosition": {
                                                "type": "number"
                                            },
                                            "assetAllocation": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "includeStressTests": {
                                        "type": "boolean",
                                        "default": false
                                    },
                                    "scenarioIds": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "example": [
                                            "SCN-001",
                                            "SCN-002",
                                            "SCN-005"
                                        ]
                                    },
                                    "benchmarkSymbol": {
                                        "type": "string",
                                        "default": "SPY"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Comprehensive analysis complete",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "investorId": {
                                                    "type": "string"
                                                },
                                                "analysisTimestamp": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "portfolioRisk": {
                                                    "type": "object",
                                                    "description": "Full portfolio risk metrics"
                                                },
                                                "concentrationAnalysis": {
                                                    "type": "object",
                                                    "description": "Full concentration analysis"
                                                },
                                                "suitabilityAssessment": {
                                                    "type": "object",
                                                    "description": "Full suitability assessment"
                                                },
                                                "stressTestResults": {
                                                    "type": "array",
                                                    "description": "Array of stress test results (if requested)",
                                                    "nullable": true
                                                },
                                                "recommendations": {
                                                    "type": "object",
                                                    "description": "Generated recommendations"
                                                },
                                                "executiveSummary": {
                                                    "type": "object",
                                                    "properties": {
                                                        "overallRiskLevel": {
                                                            "type": "string",
                                                            "enum": [
                                                                "LOW",
                                                                "MODERATE",
                                                                "MODERATE_HIGH",
                                                                "HIGH"
                                                            ]
                                                        },
                                                        "keyFindings": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "priorityActions": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "nextReviewDate": {
                                                            "type": "string",
                                                            "format": "date"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "investorId and portfolioData are required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Investor not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/assessments": {
            "get": {
                "summary": "List all assessments",
                "description": "Returns all risk assessments across all investors",
                "tags": [
                    "Assessments"
                ],
                "responses": {
                    "200": {
                        "description": "List of all assessments",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "assessments": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "assessmentId": {
                                                                "type": "string",
                                                                "example": "ASM-001"
                                                            },
                                                            "investorId": {
                                                                "type": "string",
                                                                "example": "INV-001"
                                                            },
                                                            "assessmentDate": {
                                                                "type": "string",
                                                                "format": "date-time"
                                                            },
                                                            "assessmentType": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "COMPREHENSIVE",
                                                                    "QUICK",
                                                                    "ANNUAL_REVIEW"
                                                                ]
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "PENDING",
                                                                    "IN_PROGRESS",
                                                                    "COMPLETED"
                                                                ]
                                                            },
                                                            "rawScore": {
                                                                "type": "integer"
                                                            },
                                                            "percentileScore": {
                                                                "type": "number"
                                                            }
                                                        }
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 50
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Submit new assessment",
                "description": "Creates and scores a new risk assessment, automatically generating a risk profile",
                "tags": [
                    "Assessments"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "investorId",
                                    "responses"
                                ],
                                "properties": {
                                    "investorId": {
                                        "type": "string",
                                        "description": "The investor ID",
                                        "example": "INV-001"
                                    },
                                    "assessmentType": {
                                        "type": "string",
                                        "enum": [
                                            "COMPREHENSIVE",
                                            "QUICK",
                                            "ANNUAL_REVIEW"
                                        ],
                                        "default": "COMPREHENSIVE"
                                    },
                                    "responses": {
                                        "type": "array",
                                        "description": "Array of question responses",
                                        "items": {
                                            "type": "object",
                                            "required": [
                                                "questionId",
                                                "selectedOption"
                                            ],
                                            "properties": {
                                                "questionId": {
                                                    "type": "string",
                                                    "example": "Q1"
                                                },
                                                "selectedOption": {
                                                    "type": "string",
                                                    "example": "C"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "example": {
                                "investorId": "INV-001",
                                "assessmentType": "COMPREHENSIVE",
                                "responses": [
                                    {
                                        "questionId": "Q1",
                                        "selectedOption": "C"
                                    },
                                    {
                                        "questionId": "Q2",
                                        "selectedOption": "D"
                                    },
                                    {
                                        "questionId": "Q3",
                                        "selectedOption": "B"
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Assessment created and scored successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "assessmentId": {
                                                    "type": "string",
                                                    "example": "ASM-051"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "example": "COMPLETED"
                                                },
                                                "rawScore": {
                                                    "type": "integer",
                                                    "example": 68
                                                },
                                                "percentileScore": {
                                                    "type": "number",
                                                    "example": 68
                                                },
                                                "riskProfile": {
                                                    "type": "object",
                                                    "properties": {
                                                        "profileId": {
                                                            "type": "string",
                                                            "example": "PRF-051"
                                                        },
                                                        "riskCategory": {
                                                            "type": "string",
                                                            "example": "MODERATELY_AGGRESSIVE"
                                                        },
                                                        "compositeRiskScore": {
                                                            "type": "number",
                                                            "example": 65
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Investor not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/assessments/{assessmentId}": {
            "get": {
                "summary": "Get assessment by ID",
                "description": "Returns a single assessment with all question responses",
                "tags": [
                    "Assessments"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "assessmentId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The assessment ID",
                        "example": "ASM-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Assessment found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "assessmentId": {
                                                    "type": "string"
                                                },
                                                "investorId": {
                                                    "type": "string"
                                                },
                                                "assessmentDate": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "assessmentType": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "responses": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "questionId": {
                                                                "type": "string"
                                                            },
                                                            "questionCategory": {
                                                                "type": "string"
                                                            },
                                                            "questionText": {
                                                                "type": "string"
                                                            },
                                                            "selectedOption": {
                                                                "type": "string"
                                                            },
                                                            "optionText": {
                                                                "type": "string"
                                                            },
                                                            "score": {
                                                                "type": "integer"
                                                            }
                                                        }
                                                    }
                                                },
                                                "rawScore": {
                                                    "type": "integer"
                                                },
                                                "maxPossibleScore": {
                                                    "type": "integer"
                                                },
                                                "percentileScore": {
                                                    "type": "number"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Assessment not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/assessments/investor/{investorId}/assessments": {
            "get": {
                "summary": "Get assessments for investor",
                "description": "Returns all assessments for a specific investor",
                "tags": [
                    "Assessments"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Assessments retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "assessments": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/health": {
            "get": {
                "summary": "System health check",
                "description": "Returns the health status of the Risk Management System including datastore statistics",
                "tags": [
                    "Health"
                ],
                "responses": {
                    "200": {
                        "description": "System is healthy",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "status": {
                                                    "type": "string",
                                                    "example": "healthy"
                                                },
                                                "service": {
                                                    "type": "string",
                                                    "example": "risk-management-system"
                                                },
                                                "version": {
                                                    "type": "string",
                                                    "example": "1.0.0"
                                                },
                                                "uptime": {
                                                    "type": "integer",
                                                    "description": "Server uptime in seconds",
                                                    "example": 3600
                                                },
                                                "datastore": {
                                                    "type": "object",
                                                    "properties": {
                                                        "investors": {
                                                            "type": "integer",
                                                            "example": 50
                                                        },
                                                        "profiles": {
                                                            "type": "integer",
                                                            "example": 50
                                                        },
                                                        "assessments": {
                                                            "type": "integer",
                                                            "example": 50
                                                        },
                                                        "scenarios": {
                                                            "type": "integer",
                                                            "example": 10
                                                        },
                                                        "riskFactors": {
                                                            "type": "integer",
                                                            "example": 10
                                                        },
                                                        "benchmarks": {
                                                            "type": "integer",
                                                            "example": 5
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/investors": {
            "get": {
                "summary": "List all investors",
                "description": "Returns all 50 investors with their demographic and financial information",
                "tags": [
                    "Investors"
                ],
                "responses": {
                    "200": {
                        "description": "List of all investors",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "investors": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Investor"
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 50
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create new investor",
                "description": "Creates a new investor record",
                "tags": [
                    "Investors"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "customerId",
                                    "firstName",
                                    "lastName",
                                    "email"
                                ],
                                "properties": {
                                    "customerId": {
                                        "type": "string",
                                        "example": "CUST-051"
                                    },
                                    "firstName": {
                                        "type": "string",
                                        "example": "Jane"
                                    },
                                    "lastName": {
                                        "type": "string",
                                        "example": "Doe"
                                    },
                                    "email": {
                                        "type": "string",
                                        "example": "jane.doe@email.com"
                                    },
                                    "phone": {
                                        "type": "string",
                                        "example": "555-0151"
                                    },
                                    "dateOfBirth": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "1985-06-15"
                                    },
                                    "employmentStatus": {
                                        "type": "string",
                                        "enum": [
                                            "EMPLOYED",
                                            "SELF_EMPLOYED",
                                            "RETIRED",
                                            "UNEMPLOYED"
                                        ]
                                    },
                                    "annualIncome": {
                                        "type": "number",
                                        "example": 120000
                                    },
                                    "netWorth": {
                                        "type": "number",
                                        "example": 500000
                                    },
                                    "liquidNetWorth": {
                                        "type": "number",
                                        "example": 250000
                                    },
                                    "investmentExperience": {
                                        "type": "string",
                                        "enum": [
                                            "NOVICE",
                                            "INTERMEDIATE",
                                            "EXPERIENCED",
                                            "EXPERT"
                                        ]
                                    },
                                    "investmentHorizon": {
                                        "type": "string",
                                        "enum": [
                                            "SHORT_TERM",
                                            "MEDIUM_TERM",
                                            "LONG_TERM"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Investor created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/Investor"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/investors/{investorId}": {
            "get": {
                "summary": "Get investor by ID",
                "description": "Returns a single investor by their investor ID",
                "tags": [
                    "Investors"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID (e.g., INV-001)",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Investor found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/Investor"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Investor not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update investor",
                "description": "Updates an existing investor's information",
                "tags": [
                    "Investors"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "firstName": {
                                        "type": "string"
                                    },
                                    "lastName": {
                                        "type": "string"
                                    },
                                    "email": {
                                        "type": "string"
                                    },
                                    "phone": {
                                        "type": "string"
                                    },
                                    "employmentStatus": {
                                        "type": "string",
                                        "enum": [
                                            "EMPLOYED",
                                            "SELF_EMPLOYED",
                                            "RETIRED",
                                            "UNEMPLOYED"
                                        ]
                                    },
                                    "annualIncome": {
                                        "type": "number"
                                    },
                                    "netWorth": {
                                        "type": "number"
                                    },
                                    "liquidNetWorth": {
                                        "type": "number"
                                    },
                                    "investmentExperience": {
                                        "type": "string",
                                        "enum": [
                                            "NOVICE",
                                            "INTERMEDIATE",
                                            "EXPERIENCED",
                                            "EXPERT"
                                        ]
                                    },
                                    "investmentHorizon": {
                                        "type": "string",
                                        "enum": [
                                            "SHORT_TERM",
                                            "MEDIUM_TERM",
                                            "LONG_TERM"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Investor updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/Investor"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Investor not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "summary": "Delete investor",
                "description": "Deletes an investor record",
                "tags": [
                    "Investors"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Investor deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Investor deleted successfully"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Investor not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/investors/{investorId}/profile": {
            "get": {
                "summary": "Get investor with active risk profile",
                "description": "Returns investor details along with their current active risk profile",
                "tags": [
                    "Investors"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Investor with profile found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "investor": {
                                                    "$ref": "#/components/schemas/Investor"
                                                },
                                                "riskProfile": {
                                                    "type": "object",
                                                    "properties": {
                                                        "profileId": {
                                                            "type": "string",
                                                            "example": "PRF-001"
                                                        },
                                                        "riskCategory": {
                                                            "type": "string",
                                                            "example": "MODERATE"
                                                        },
                                                        "compositeRiskScore": {
                                                            "type": "number",
                                                            "example": 65
                                                        },
                                                        "recommendedAllocation": {
                                                            "type": "object",
                                                            "properties": {
                                                                "equities": {
                                                                    "type": "integer"
                                                                },
                                                                "fixedIncome": {
                                                                    "type": "integer"
                                                                },
                                                                "alternatives": {
                                                                    "type": "integer"
                                                                },
                                                                "cash": {
                                                                    "type": "integer"
                                                                }
                                                            }
                                                        },
                                                        "maxDrawdownTolerance": {
                                                            "type": "number",
                                                            "example": 25
                                                        },
                                                        "maxVolatilityTolerance": {
                                                            "type": "number",
                                                            "example": 18
                                                        },
                                                        "lastAssessmentDate": {
                                                            "type": "string",
                                                            "format": "date-time"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Investor not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/investors/customer/{customerId}": {
            "get": {
                "summary": "Get investor by customer ID",
                "description": "Returns investor by their external customer ID reference (from banking core system)",
                "tags": [
                    "Investors"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "customerId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The customer ID from banking core system",
                        "example": "CUST-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Investor found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/Investor"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Investor not found for customer ID",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/profiles": {
            "get": {
                "summary": "List all risk profiles",
                "description": "Returns all risk profiles across all investors",
                "tags": [
                    "Profiles"
                ],
                "responses": {
                    "200": {
                        "description": "List of all risk profiles",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "profiles": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/RiskProfile"
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 50
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create profile (admin override)",
                "description": "Manually creates a risk profile without going through assessment",
                "tags": [
                    "Profiles"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "investorId",
                                    "riskCategory"
                                ],
                                "properties": {
                                    "investorId": {
                                        "type": "string",
                                        "example": "INV-001"
                                    },
                                    "riskCategory": {
                                        "type": "string",
                                        "enum": [
                                            "CONSERVATIVE",
                                            "MODERATELY_CONSERVATIVE",
                                            "MODERATE",
                                            "MODERATELY_AGGRESSIVE",
                                            "AGGRESSIVE"
                                        ]
                                    },
                                    "compositeRiskScore": {
                                        "type": "number"
                                    },
                                    "recommendedAllocation": {
                                        "type": "object"
                                    },
                                    "maxDrawdownTolerance": {
                                        "type": "number"
                                    },
                                    "maxVolatilityTolerance": {
                                        "type": "number"
                                    },
                                    "maxConcentrationLimit": {
                                        "type": "number"
                                    },
                                    "isActive": {
                                        "type": "boolean",
                                        "default": true
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Profile created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/RiskProfile"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/profiles/{profileId}": {
            "get": {
                "summary": "Get profile by ID",
                "description": "Returns a single risk profile by its ID",
                "tags": [
                    "Profiles"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "profileId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The profile ID",
                        "example": "PRF-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Profile found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/RiskProfile"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Risk profile not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update profile",
                "description": "Updates an existing risk profile",
                "tags": [
                    "Profiles"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "profileId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The profile ID",
                        "example": "PRF-001"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "riskCategory": {
                                        "type": "string",
                                        "enum": [
                                            "CONSERVATIVE",
                                            "MODERATELY_CONSERVATIVE",
                                            "MODERATE",
                                            "MODERATELY_AGGRESSIVE",
                                            "AGGRESSIVE"
                                        ]
                                    },
                                    "compositeRiskScore": {
                                        "type": "number"
                                    },
                                    "recommendedAllocation": {
                                        "type": "object"
                                    },
                                    "maxDrawdownTolerance": {
                                        "type": "number"
                                    },
                                    "maxVolatilityTolerance": {
                                        "type": "number"
                                    },
                                    "isActive": {
                                        "type": "boolean"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Profile updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/RiskProfile"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Risk profile not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/profiles/investor/{investorId}/profiles": {
            "get": {
                "summary": "Get all profiles for investor",
                "description": "Returns all risk profiles (active and historical) for a specific investor",
                "tags": [
                    "Profiles"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Profiles retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "profiles": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/RiskProfile"
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/profiles/investor/{investorId}/profiles/active": {
            "get": {
                "summary": "Get active profile for investor",
                "description": "Returns the current active risk profile for an investor with risk limits",
                "tags": [
                    "Profiles"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Active profile found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "profileId": {
                                                    "type": "string",
                                                    "example": "PRF-001"
                                                },
                                                "investorId": {
                                                    "type": "string",
                                                    "example": "INV-001"
                                                },
                                                "riskCategory": {
                                                    "type": "string",
                                                    "example": "MODERATE"
                                                },
                                                "riskCategoryCode": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "compositeRiskScore": {
                                                    "type": "number",
                                                    "example": 65
                                                },
                                                "riskToleranceScore": {
                                                    "type": "number",
                                                    "example": 65
                                                },
                                                "riskCapacityScore": {
                                                    "type": "number",
                                                    "example": 72
                                                },
                                                "recommendedAllocation": {
                                                    "type": "object",
                                                    "properties": {
                                                        "equities": {
                                                            "type": "integer"
                                                        },
                                                        "fixedIncome": {
                                                            "type": "integer"
                                                        },
                                                        "alternatives": {
                                                            "type": "integer"
                                                        },
                                                        "cash": {
                                                            "type": "integer"
                                                        }
                                                    }
                                                },
                                                "riskLimits": {
                                                    "type": "object",
                                                    "properties": {
                                                        "maxDrawdownTolerance": {
                                                            "type": "number",
                                                            "example": 25
                                                        },
                                                        "maxVolatilityTolerance": {
                                                            "type": "number",
                                                            "example": 18
                                                        },
                                                        "maxConcentrationLimit": {
                                                            "type": "number",
                                                            "example": 25
                                                        }
                                                    }
                                                },
                                                "validFrom": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "isActive": {
                                                    "type": "boolean",
                                                    "example": true
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No active risk profile found for investor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/recommendations": {
            "get": {
                "summary": "List all recommendations",
                "description": "Returns all investment recommendations across all investors",
                "tags": [
                    "Recommendations"
                ],
                "responses": {
                    "200": {
                        "description": "List of all recommendations",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "recommendations": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "recommendationId": {
                                                                "type": "string",
                                                                "example": "REC-001"
                                                            },
                                                            "investorId": {
                                                                "type": "string"
                                                            },
                                                            "profileId": {
                                                                "type": "string"
                                                            },
                                                            "generatedDate": {
                                                                "type": "string",
                                                                "format": "date-time"
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "ACTIVE",
                                                                    "ACKNOWLEDGED",
                                                                    "IMPLEMENTED",
                                                                    "DISMISSED"
                                                                ]
                                                            },
                                                            "overallAssessment": {
                                                                "type": "object"
                                                            },
                                                            "recommendations": {
                                                                "type": "array"
                                                            }
                                                        }
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/recommendations/{recommendationId}": {
            "get": {
                "summary": "Get recommendation by ID",
                "description": "Returns a single recommendation with all details",
                "tags": [
                    "Recommendations"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "recommendationId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The recommendation ID",
                        "example": "REC-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Recommendation found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "recommendationId": {
                                                    "type": "string"
                                                },
                                                "investorId": {
                                                    "type": "string"
                                                },
                                                "profileId": {
                                                    "type": "string"
                                                },
                                                "generatedDate": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "overallAssessment": {
                                                    "type": "object",
                                                    "properties": {
                                                        "suitabilityScore": {
                                                            "type": "number"
                                                        },
                                                        "suitabilityRating": {
                                                            "type": "string",
                                                            "enum": [
                                                                "HIGHLY_SUITABLE",
                                                                "SUITABLE",
                                                                "SUITABLE_WITH_CAVEATS",
                                                                "REVIEW_REQUIRED",
                                                                "NOT_SUITABLE"
                                                            ]
                                                        },
                                                        "summary": {
                                                            "type": "string"
                                                        }
                                                    }
                                                },
                                                "recommendations": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "recommendationId": {
                                                                "type": "string"
                                                            },
                                                            "category": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "REBALANCING",
                                                                    "DIVERSIFICATION",
                                                                    "RISK_REDUCTION",
                                                                    "INCOME"
                                                                ]
                                                            },
                                                            "priority": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "HIGH",
                                                                    "MEDIUM",
                                                                    "LOW"
                                                                ]
                                                            },
                                                            "title": {
                                                                "type": "string"
                                                            },
                                                            "description": {
                                                                "type": "string"
                                                            },
                                                            "currentValue": {
                                                                "type": "number"
                                                            },
                                                            "targetValue": {
                                                                "type": "number"
                                                            }
                                                        }
                                                    }
                                                },
                                                "nextReviewDate": {
                                                    "type": "string",
                                                    "format": "date"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Recommendation not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/recommendations/investor/{investorId}/recommendations": {
            "get": {
                "summary": "Get recommendations for investor",
                "description": "Returns all recommendations for a specific investor",
                "tags": [
                    "Recommendations"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Recommendations retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "recommendations": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/recommendations/investor/{investorId}/recommendations/active": {
            "get": {
                "summary": "Get active recommendations for investor",
                "description": "Returns only active (non-dismissed, non-implemented) recommendations for an investor",
                "tags": [
                    "Recommendations"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Active recommendations retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "recommendations": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/recommendations/{recommendationId}/status": {
            "put": {
                "summary": "Update recommendation status",
                "description": "Updates the status of a recommendation (acknowledge, implement, dismiss)",
                "tags": [
                    "Recommendations"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "recommendationId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The recommendation ID",
                        "example": "REC-001"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "status"
                                ],
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "ACTIVE",
                                            "ACKNOWLEDGED",
                                            "IMPLEMENTED",
                                            "DISMISSED"
                                        ],
                                        "example": "ACKNOWLEDGED"
                                    },
                                    "notes": {
                                        "type": "string",
                                        "example": "Client acknowledged during quarterly review"
                                    }
                                }
                            },
                            "example": {
                                "status": "ACKNOWLEDGED",
                                "notes": "Client acknowledged during quarterly review"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Status updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "recommendationId": {
                                                    "type": "string"
                                                },
                                                "status": {
                                                    "type": "string"
                                                },
                                                "notes": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Status is required",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Recommendation not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/questionnaire": {
            "get": {
                "summary": "Get risk assessment questionnaire",
                "description": "Returns the complete 15-question risk assessment questionnaire with scoring guide",
                "tags": [
                    "Reference Data"
                ],
                "responses": {
                    "200": {
                        "description": "Questionnaire retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "questionnaireType": {
                                                    "type": "string",
                                                    "example": "COMPREHENSIVE"
                                                },
                                                "totalQuestions": {
                                                    "type": "integer",
                                                    "example": 15
                                                },
                                                "estimatedTime": {
                                                    "type": "string",
                                                    "example": "5-10 minutes"
                                                },
                                                "categories": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "example": [
                                                        "RISK_TOLERANCE",
                                                        "TIME_HORIZON",
                                                        "FINANCIAL_SITUATION",
                                                        "INVESTMENT_KNOWLEDGE"
                                                    ]
                                                },
                                                "questions": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "questionId": {
                                                                "type": "string"
                                                            },
                                                            "questionNumber": {
                                                                "type": "integer"
                                                            },
                                                            "category": {
                                                                "type": "string"
                                                            },
                                                            "questionText": {
                                                                "type": "string"
                                                            },
                                                            "options": {
                                                                "type": "array",
                                                                "items": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "optionId": {
                                                                            "type": "string"
                                                                        },
                                                                        "text": {
                                                                            "type": "string"
                                                                        },
                                                                        "score": {
                                                                            "type": "integer"
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/questionnaire/{type}": {
            "get": {
                "summary": "Get questionnaire by type",
                "description": "Returns questionnaire for specified type (currently only COMPREHENSIVE is available)",
                "tags": [
                    "Reference Data"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "type",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "COMPREHENSIVE"
                            ]
                        },
                        "description": "Type of questionnaire"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Questionnaire retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SuccessResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Questionnaire type not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/risk-factors": {
            "get": {
                "summary": "Get all risk factors",
                "description": "Returns all risk factor definitions with weights and current levels",
                "tags": [
                    "Reference Data"
                ],
                "responses": {
                    "200": {
                        "description": "Risk factors retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "factors": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "factorId": {
                                                                "type": "string",
                                                                "example": "FAC-001"
                                                            },
                                                            "factorName": {
                                                                "type": "string",
                                                                "example": "Market Risk"
                                                            },
                                                            "factorCode": {
                                                                "type": "string",
                                                                "example": "MARKET"
                                                            },
                                                            "factorCategory": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "SYSTEMATIC",
                                                                    "UNSYSTEMATIC"
                                                                ],
                                                                "example": "SYSTEMATIC"
                                                            },
                                                            "description": {
                                                                "type": "string"
                                                            },
                                                            "defaultWeight": {
                                                                "type": "number",
                                                                "example": 0.35
                                                            },
                                                            "benchmarkIndex": {
                                                                "type": "string",
                                                                "example": "SPY"
                                                            },
                                                            "currentLevel": {
                                                                "type": "number",
                                                                "example": 0.65
                                                            },
                                                            "historicalAverage": {
                                                                "type": "number",
                                                                "example": 0.5
                                                            },
                                                            "isActive": {
                                                                "type": "boolean"
                                                            }
                                                        }
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 10
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/benchmarks": {
            "get": {
                "summary": "Get all benchmarks",
                "description": "Returns all market benchmarks for performance comparison",
                "tags": [
                    "Reference Data"
                ],
                "responses": {
                    "200": {
                        "description": "Benchmarks retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "benchmarks": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "benchmarkId": {
                                                                "type": "string",
                                                                "example": "BM-001"
                                                            },
                                                            "benchmarkName": {
                                                                "type": "string",
                                                                "example": "S&P 500 Total Return"
                                                            },
                                                            "benchmarkSymbol": {
                                                                "type": "string",
                                                                "example": "SPY"
                                                            },
                                                            "benchmarkType": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "EQUITY",
                                                                    "FIXED_INCOME",
                                                                    "BALANCED",
                                                                    "COMMODITY"
                                                                ],
                                                                "example": "EQUITY"
                                                            },
                                                            "annualizedReturn": {
                                                                "type": "number",
                                                                "example": 10.5
                                                            },
                                                            "annualizedVolatility": {
                                                                "type": "number",
                                                                "example": 15.2
                                                            },
                                                            "sharpeRatio": {
                                                                "type": "number",
                                                                "example": 0.69
                                                            },
                                                            "maxDrawdown": {
                                                                "type": "number",
                                                                "example": -33.8
                                                            },
                                                            "isDefault": {
                                                                "type": "boolean"
                                                            },
                                                            "isActive": {
                                                                "type": "boolean"
                                                            }
                                                        }
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 5
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/risk-categories": {
            "get": {
                "summary": "Get risk category definitions",
                "description": "Returns all five risk categories with typical allocations and volatility ranges",
                "tags": [
                    "Reference Data"
                ],
                "responses": {
                    "200": {
                        "description": "Risk categories retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "categories": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "code": {
                                                                "type": "integer",
                                                                "example": 3
                                                            },
                                                            "name": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "CONSERVATIVE",
                                                                    "MODERATELY_CONSERVATIVE",
                                                                    "MODERATE",
                                                                    "MODERATELY_AGGRESSIVE",
                                                                    "AGGRESSIVE"
                                                                ],
                                                                "example": "MODERATE"
                                                            },
                                                            "description": {
                                                                "type": "string",
                                                                "example": "Balanced approach between growth and stability"
                                                            },
                                                            "scoreRange": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "min": {
                                                                        "type": "integer"
                                                                    },
                                                                    "max": {
                                                                        "type": "integer"
                                                                    }
                                                                }
                                                            },
                                                            "typicalAllocation": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "equities": {
                                                                        "type": "integer"
                                                                    },
                                                                    "fixedIncome": {
                                                                        "type": "integer"
                                                                    },
                                                                    "alternatives": {
                                                                        "type": "integer"
                                                                    },
                                                                    "cash": {
                                                                        "type": "integer"
                                                                    }
                                                                }
                                                            },
                                                            "typicalVolatility": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "min": {
                                                                        "type": "integer"
                                                                    },
                                                                    "max": {
                                                                        "type": "integer"
                                                                    }
                                                                }
                                                            },
                                                            "maxDrawdownTolerance": {
                                                                "type": "integer"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/scenarios": {
            "get": {
                "summary": "List all scenarios",
                "description": "Returns all stress test scenarios (historical, hypothetical, and regulatory)",
                "tags": [
                    "Scenarios"
                ],
                "responses": {
                    "200": {
                        "description": "List of all scenarios",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scenarios": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "scenarioId": {
                                                                "type": "string",
                                                                "example": "SCN-001"
                                                            },
                                                            "scenarioName": {
                                                                "type": "string",
                                                                "example": "2008 Financial Crisis"
                                                            },
                                                            "scenarioDescription": {
                                                                "type": "string"
                                                            },
                                                            "scenarioCategory": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "HISTORICAL",
                                                                    "HYPOTHETICAL",
                                                                    "REGULATORY"
                                                                ]
                                                            },
                                                            "isActive": {
                                                                "type": "boolean"
                                                            },
                                                            "shockParameters": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "equityShock": {
                                                                        "type": "number"
                                                                    },
                                                                    "bondShock": {
                                                                        "type": "number"
                                                                    },
                                                                    "creditSpreadChange": {
                                                                        "type": "number"
                                                                    },
                                                                    "volatilitySpike": {
                                                                        "type": "number"
                                                                    }
                                                                }
                                                            },
                                                            "sectorShocks": {
                                                                "type": "object"
                                                            }
                                                        }
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer",
                                                    "example": 10
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create custom scenario",
                "description": "Creates a new stress test scenario",
                "tags": [
                    "Scenarios"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "scenarioName",
                                    "scenarioCategory",
                                    "shockParameters"
                                ],
                                "properties": {
                                    "scenarioName": {
                                        "type": "string",
                                        "example": "Custom Recession Scenario"
                                    },
                                    "scenarioDescription": {
                                        "type": "string",
                                        "example": "A custom stress scenario for testing"
                                    },
                                    "scenarioCategory": {
                                        "type": "string",
                                        "enum": [
                                            "HISTORICAL",
                                            "HYPOTHETICAL",
                                            "REGULATORY"
                                        ],
                                        "example": "HYPOTHETICAL"
                                    },
                                    "isActive": {
                                        "type": "boolean",
                                        "default": true
                                    },
                                    "shockParameters": {
                                        "type": "object",
                                        "properties": {
                                            "equityShock": {
                                                "type": "number",
                                                "example": -30
                                            },
                                            "bondShock": {
                                                "type": "number",
                                                "example": 5
                                            },
                                            "creditSpreadChange": {
                                                "type": "number",
                                                "example": 200
                                            },
                                            "volatilitySpike": {
                                                "type": "number",
                                                "example": 50
                                            }
                                        }
                                    },
                                    "sectorShocks": {
                                        "type": "object",
                                        "example": {
                                            "TECHNOLOGY": -35,
                                            "FINANCIAL": -40,
                                            "HEALTHCARE": -20
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Scenario created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scenarioId": {
                                                    "type": "string"
                                                },
                                                "scenarioName": {
                                                    "type": "string"
                                                },
                                                "scenarioCategory": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/scenarios/{scenarioId}": {
            "get": {
                "summary": "Get scenario by ID",
                "description": "Returns a single stress test scenario with all parameters",
                "tags": [
                    "Scenarios"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "scenarioId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The scenario ID",
                        "example": "SCN-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Scenario found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scenarioId": {
                                                    "type": "string"
                                                },
                                                "scenarioName": {
                                                    "type": "string"
                                                },
                                                "scenarioDescription": {
                                                    "type": "string"
                                                },
                                                "scenarioCategory": {
                                                    "type": "string"
                                                },
                                                "isActive": {
                                                    "type": "boolean"
                                                },
                                                "shockParameters": {
                                                    "type": "object"
                                                },
                                                "sectorShocks": {
                                                    "type": "object"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Scenario not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "summary": "Update scenario",
                "description": "Updates an existing stress test scenario",
                "tags": [
                    "Scenarios"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "scenarioId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The scenario ID",
                        "example": "SCN-001"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "scenarioName": {
                                        "type": "string"
                                    },
                                    "scenarioDescription": {
                                        "type": "string"
                                    },
                                    "scenarioCategory": {
                                        "type": "string",
                                        "enum": [
                                            "HISTORICAL",
                                            "HYPOTHETICAL",
                                            "REGULATORY"
                                        ]
                                    },
                                    "isActive": {
                                        "type": "boolean"
                                    },
                                    "shockParameters": {
                                        "type": "object"
                                    },
                                    "sectorShocks": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Scenario updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object"
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Scenario not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "summary": "Delete scenario",
                "description": "Deletes a stress test scenario",
                "tags": [
                    "Scenarios"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "scenarioId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The scenario ID",
                        "example": "SCN-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Scenario deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Scenario deleted successfully"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Scenario not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/scenarios/category/{category}": {
            "get": {
                "summary": "Get scenarios by category",
                "description": "Returns all scenarios of a specific category",
                "tags": [
                    "Scenarios"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "category",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "HISTORICAL",
                                "HYPOTHETICAL",
                                "REGULATORY"
                            ]
                        },
                        "description": "The scenario category",
                        "example": "HISTORICAL"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Scenarios retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scenarios": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/scores": {
            "get": {
                "summary": "List all risk scores",
                "description": "Returns all point-in-time risk score snapshots",
                "tags": [
                    "Scores"
                ],
                "responses": {
                    "200": {
                        "description": "List of all risk scores",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scores": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "scoreId": {
                                                                "type": "string",
                                                                "example": "SCR-001"
                                                            },
                                                            "investorId": {
                                                                "type": "string"
                                                            },
                                                            "profileId": {
                                                                "type": "string"
                                                            },
                                                            "scoreDate": {
                                                                "type": "string",
                                                                "format": "date-time"
                                                            },
                                                            "scoreType": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "PORTFOLIO_RISK",
                                                                    "CONCENTRATION",
                                                                    "SUITABILITY"
                                                                ]
                                                            },
                                                            "portfolioMetrics": {
                                                                "type": "object"
                                                            },
                                                            "concentrationMetrics": {
                                                                "type": "object"
                                                            },
                                                            "profileAlignment": {
                                                                "type": "object"
                                                            }
                                                        }
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create risk score",
                "description": "Creates a new risk score snapshot (typically from analysis results)",
                "tags": [
                    "Scores"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "investorId",
                                    "scoreType"
                                ],
                                "properties": {
                                    "investorId": {
                                        "type": "string",
                                        "example": "INV-001"
                                    },
                                    "profileId": {
                                        "type": "string",
                                        "example": "PRF-001"
                                    },
                                    "scoreType": {
                                        "type": "string",
                                        "enum": [
                                            "PORTFOLIO_RISK",
                                            "CONCENTRATION",
                                            "SUITABILITY"
                                        ],
                                        "example": "PORTFOLIO_RISK"
                                    },
                                    "portfolioMetrics": {
                                        "type": "object",
                                        "properties": {
                                            "totalValue": {
                                                "type": "number"
                                            },
                                            "volatility": {
                                                "type": "number"
                                            },
                                            "beta": {
                                                "type": "number"
                                            },
                                            "sharpeRatio": {
                                                "type": "number"
                                            },
                                            "valueAtRisk95": {
                                                "type": "number"
                                            }
                                        }
                                    },
                                    "concentrationMetrics": {
                                        "type": "object"
                                    },
                                    "profileAlignment": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Score created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scoreId": {
                                                    "type": "string"
                                                },
                                                "scoreDate": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "investorId": {
                                                    "type": "string"
                                                },
                                                "scoreType": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/scores/{scoreId}": {
            "get": {
                "summary": "Get score by ID",
                "description": "Returns a single risk score snapshot",
                "tags": [
                    "Scores"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "scoreId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The score ID",
                        "example": "SCR-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Score found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scoreId": {
                                                    "type": "string"
                                                },
                                                "investorId": {
                                                    "type": "string"
                                                },
                                                "profileId": {
                                                    "type": "string"
                                                },
                                                "scoreDate": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "scoreType": {
                                                    "type": "string"
                                                },
                                                "portfolioMetrics": {
                                                    "type": "object"
                                                },
                                                "concentrationMetrics": {
                                                    "type": "object"
                                                },
                                                "profileAlignment": {
                                                    "type": "object"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Risk score not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/scores/investor/{investorId}/scores": {
            "get": {
                "summary": "Get all scores for investor",
                "description": "Returns all historical risk scores for a specific investor",
                "tags": [
                    "Scores"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Scores retrieved",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scores": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "count": {
                                                    "type": "integer"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/scores/investor/{investorId}/scores/latest": {
            "get": {
                "summary": "Get latest score for investor",
                "description": "Returns the most recent risk score for an investor",
                "tags": [
                    "Scores"
                ],
                "parameters": [
                    {
                        "in": "path",
                        "name": "investorId",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The investor ID",
                        "example": "INV-001"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Latest score found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "scoreId": {
                                                    "type": "string"
                                                },
                                                "investorId": {
                                                    "type": "string"
                                                },
                                                "scoreDate": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "portfolioMetrics": {
                                                    "type": "object"
                                                }
                                            }
                                        },
                                        "timestamp": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No risk scores found for investor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
